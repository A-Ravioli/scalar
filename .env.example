# =============================================================================
# Supabase Configuration
# =============================================================================
SUPABASE_URL=https://your-project.supabase.co
SUPABASE_ANON_KEY=your-anon-key-here
SUPABASE_SERVICE_ROLE_KEY=your-service-role-key-here

# Direct Postgres connection (optional, for migrations and direct DB access)
DATABASE_URL=postgresql://postgres:[YOUR-PASSWORD]@db.[YOUR-PROJECT-REF].supabase.co:5432/postgres

# =============================================================================
# SFCompute Integration
# =============================================================================
SF_API_KEY=your-sfcompute-api-key-here
SF_API_URL=https://api.sfcompute.com
SF_API_TIMEOUT=30

# =============================================================================
# Service Configuration
# =============================================================================
# API Gateway
API_GATEWAY_PORT=8000
API_GATEWAY_HOST=0.0.0.0

# Scheduler
SCHEDULER_POLL_INTERVAL=5
SCHEDULER_MAX_RETRIES=3
SCHEDULER_DEAD_LETTER_QUEUE_ENABLED=true

# Capacity Manager
CAPACITY_MANAGER_PORT=8001
CAPACITY_MANAGER_AUTOSCALER_INTERVAL=60
CAPACITY_MANAGER_FAST_TIER_SAFETY_FACTOR=1.5
CAPACITY_MANAGER_FLEX_TIER_MAX_PRICE_THRESHOLD=0.95

# Runtime Agent
RUNTIME_AGENT_PORT=8002
RUNTIME_AGENT_DOCKER_SOCKET=/var/run/docker.sock
RUNTIME_AGENT_LOG_RETENTION_HOURS=24

# Billing Service
BILLING_AGGREGATION_INTERVAL=3600
BILLING_STRIPE_ENABLED=false

# Forecasting Service
FORECASTING_UPDATE_INTERVAL=300
FORECASTING_EWMA_ALPHA=0.3

# =============================================================================
# Messaging & Queue
# =============================================================================
# Use Supabase Realtime or Redis (set one)
QUEUE_TYPE=supabase_realtime
# REDIS_URL=redis://default:[PASSWORD]@[HOST]:[PORT]
# REDIS_TLS=true

# =============================================================================
# Stripe Configuration (for billing)
# =============================================================================
STRIPE_SECRET_KEY=sk_test_your-stripe-secret-key
STRIPE_PUBLISHABLE_KEY=pk_test_your-stripe-publishable-key
STRIPE_WEBHOOK_SECRET=whsec_your-webhook-secret

# =============================================================================
# Authentication & Security
# =============================================================================
JWT_SECRET=your-jwt-secret-key-change-in-production
API_KEY_ENCRYPTION_KEY=your-32-byte-encryption-key-here
SESSION_SECRET=your-session-secret-key

# =============================================================================
# Observability
# =============================================================================
LOG_LEVEL=INFO
OTEL_EXPORTER_OTLP_ENDPOINT=http://localhost:4317
OTEL_SERVICE_NAME=scalar
OTEL_ENABLED=false

# Prometheus metrics
METRICS_ENABLED=true
METRICS_PORT=9090

# =============================================================================
# Tier Configuration
# =============================================================================
# Fast Tier (Serverless)
FAST_TIER_STARTUP_LATENCY_SLO=30
FAST_TIER_MIN_WARM_CAPACITY_GPU_HOURS=10

# Flex Tier (Cheapest)
FLEX_TIER_MAX_WAIT_HOURS=24
FLEX_TIER_BACKFILL_ENABLED=true
FLEX_TIER_PREEMPTIBLE=true

# =============================================================================
# Bin-Packing Configuration
# =============================================================================
BIN_PACKER_UTILIZATION_WEIGHT=0.6
BIN_PACKER_FRAGMENTATION_WEIGHT=0.3
BIN_PACKER_EXPIRY_PENALTY_WEIGHT=0.1
BIN_PACKER_SAFETY_MARGIN_SECONDS=300

# =============================================================================
# Railway Deployment (auto-detected, but can override)
# =============================================================================
# RAILWAY_ENVIRONMENT=production
# RAILWAY_SERVICE_NAME=api-gateway
# PORT=8000

# =============================================================================
# Development & Testing
# =============================================================================
ENVIRONMENT=development
DEBUG=false
TESTING=false

